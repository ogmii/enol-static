function getUri(){var e=$(location).attr("href");return parts=e.split("/"),last_part=parts[parts.length-1],last_part}function validateEmail(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function hoverArrow(){$(".register-arrow").animate({top:"+=20"},1e3),$(".register-arrow").animate({top:"-=20"},1e3,hoverArrow)}function url_slug(e,t){e=String(e),t=Object(t);var a={delimiter:"-",limit:void 0,lowercase:!0,replacements:{},transliterate:"undefined"==typeof XRegExp};for(var r in a)t.hasOwnProperty(r)||(t[r]=a[r]);var s={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y","©":"(c)","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"H","Ώ":"W","Ϊ":"I","Ϋ":"Y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Ş":"S","İ":"I","Ç":"C","Ü":"U","Ö":"O","Ğ":"G","ş":"s","ı":"i","ç":"c","ü":"u","ö":"o","ğ":"g","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Ą":"A","Ć":"C","Ę":"e","Ł":"L","Ń":"N","Ó":"o","Ś":"S","Ź":"Z","Ż":"Z","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ó":"o","ś":"s","ź":"z","ż":"z","Ā":"A","Č":"C","Ē":"E","Ģ":"G","Ī":"i","Ķ":"k","Ļ":"L","Ņ":"N","Š":"S","Ū":"u","Ž":"Z","ā":"a","č":"c","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","š":"s","ū":"u","ž":"z"};for(var r in t.replacements)e=e.replace(RegExp(r,"g"),t.replacements[r]);if(t.transliterate)for(var r in s)e=e.replace(RegExp(r,"g"),s[r]);var o="undefined"==typeof XRegExp?RegExp("[^a-z0-9]+","ig"):XRegExp("[^\\p{L}\\p{N}]+","ig");return e=(e=(e=(e=e.replace(o,t.delimiter)).replace(RegExp("["+t.delimiter+"]{2,}","g"),t.delimiter)).substring(0,t.limit)).replace(RegExp("(^"+t.delimiter+"|"+t.delimiter+"$)","g"),""),t.lowercase?e.toLowerCase():e}var debug=!1,startDate=new Date("10/16/2020 09:00:00 GMT+02:00"),endDate=new Date("10/16/2020 12:00:00 GMT+02:00");$(document).ready(function(){new Date<=startDate?$(".enol-countdown").countdown(startDate,function(e){$(".days").html(e.strftime("%D")),$(".hours").html(e.strftime("%H")),$(".minutes").html(e.strftime("%M")),$(".seconds").html(e.strftime("%S"))}):$(".enol-countdown").countdown(endDate,function(e){$(".hours").html(e.strftime("%H")),$(".minutes").html(e.strftime("%M")),$(".seconds").html(e.strftime("%S"))}),$(".enol-countdown").on("finish.countdown",function(){$(".enter-quiz").removeClass("disabled"),$(".enol-start").addClass("started"),$(".enol-countdown").empty().append($('<div class="hours"></div>:<div class="minutes"></div>:<div class="seconds"></div>')),$(".enol-countdown").countdown(endDate,function(e){$(".hours").html(e.strftime("%H")),$(".minutes").html(e.strftime("%M")),$(".seconds").html(e.strftime("%S"))})}),new Date<=endDate&&$("#quiz-countdown").countdown(endDate,function(e){$("#hours").html(e.strftime("%H")),$("#minutes").html(e.strftime("%M")),$("#seconds").html(e.strftime("%S"))}),$(".enol-countdown").on("finish.countdown",function(){$(".enol-start").removeClass("enol-start")}),$(".enter-quiz").on("click",function(e){$(this).hasClass("disabled")&&0==debug&&(e.preventDefault(),toastr.error("Olympiáda ještě nezačala."))}),$(".enol-logo-black").is(":visible")||$(document).on("scroll click",function(){$(".enol-logo-black").fadeIn()}),$(".enol-start").on({mouseenter:function(){$(".countdown").fadeIn(300)},mouseleave:function(){$(".countdown").fadeOut(300)}}),$(".login").is(":visible")&&$(".login").on({mouseenter:function(){$(".header-hover.actions").fadeIn(300)},mouseleave:function(){$(".header-hover.actions").fadeOut(300)}}),hoverArrow(),$(".menu-open").on("click",function(){$(".mobile-menu").is(":visible")?$(".mobile-menu").slideUp():$(".mobile-menu").slideDown()});$("#kraj_id");var e=$("#okres_id"),t=$("#city"),a={krajId:"",okresId:"",city:""},r=[],s=[],o=[];$(".team-row").each(function(){$.inArray($(this).attr("kraj-id"),r)&&r.push($(this).attr("kraj-id")),$.inArray($(this).attr("okres-id"),s)&&s.push($(this).attr("okres-id")),$.inArray($(this).attr("city"),o)&&o.push($(this).attr("city"))}),a.city=o,a.okresId=s,a.krajId=r,$(".teams-table.admin-table").tablesorter({cssChildRow:"row-details",dateFormat:"ddmmyyyy",headers:{1:{sorter:"shortDate"},4:{sorter:!!$(".points").length},5:{sorter:!!$(".points").length}}}),$(".teams-table.teacher-dash").tablesorter({headers:{1:{sorter:!1}}}),$(".flash").length&&$(".flash").slideDown(250).delay(5e3).slideUp(250),$(".mCheckTeam").mCheckable({className:"radioTeam"}),$(".mCheckTeacher").mCheckable({className:"radioTeacher"}),$(".radio-answer").mCheckable({className:"radioAnswer"}),$(".mCheckTeam").is(":checked")&&$(".mCheckTeam").prev("label").css("color","white"),$(".mCheckTeacher").is(":checked")&&$(".mCheckTeacher").prev("label").css("color","white"),$(".radioTeam, .radioTeacher, label, .mCheckTeacher, .mCheckTeam").on("click",function(){$(".mCheckTeam").is(":checked")?$(".mCheckTeam").prev("label").css("color","white"):$(".mCheckTeam").prev("label").css("color","#5d5958"),$(".mCheckTeacher").is(":checked")?$(".mCheckTeacher").prev("label").css("color","white"):$(".mCheckTeacher").prev("label").css("color","#5d5958")}),$("#addMember").on("click",function(){var e=$(".user").length;if(1==e)$(".removeMember").removeClass("inactive"),$(".removeMember").addClass("active"),$(".user[data-id=1]").clone().appendTo(".users"),(t=$(".users").children().last()).children().first().removeClass("user-img-1").addClass("user-img-2"),t.attr("data-id","2"),t.find(".name").attr("id","userName2").val("").prev("label").attr("for","userName2"),t.find(".surname").attr("id","userSurname2").val("").prev("label").attr("for","userSurname2").val(""),t.find(".email").attr("id","userEmail2").val("").prev("label").attr("for","userEmail2").val(""),t.find(".class").attr("id","userClass2").val("").prev("label").attr("for","userClass2").val(""),t.find(".teacher-info").attr("id","teacher-info2").text(""),$("#memberCount").text("Ještě můžete přidat jednoho člena");else if(2==e){var t;$(".addMember").addClass("inactive"),$(".addMember").removeClass("active"),$(".user[data-id=2]").clone().appendTo(".users"),(t=$(".users").children().last()).children().first().removeClass("user-img-2").addClass("user-img-3"),t.attr("data-id","3"),t.find(".name").attr("id","userName3").val("").prev("label").attr("for","userName3"),t.find(".surname").attr("id","userSurname3").val("").prev("label").attr("for","userSurname3"),t.find(".email").attr("id","userEmail3").val("").prev("label").attr("for","userEmail3"),t.find(".class").attr("id","userClass3").val("").prev("label").attr("for","userClass3").val(""),t.find(".teacher-info").attr("id","teacher-info3").text(""),$("#memberCount").text("")}}),$("#removeMember").on("click",function(){var e=$(".user").length;2==e?($(".users").children().last().remove(),$(".addMember").removeClass("inactive"),$(".addMember").addClass("active"),$(".removeMember").removeClass("active"),$(".removeMember").addClass("inactive"),$("#memberCount").text("Ještě můžete přidat dva členy")):3==e&&($(".users").children().last().remove(),$(".addMember").removeClass("inactive"),$(".addMember").addClass("active"),$("#memberCount").text("Ještě můžete přidat jednoho člena"))}),$(".js--register").on("click",function(e){if($("#student").is(":checked")){var t=$("#teamName"),a=$("#password"),r=$("#school"),s=$("#passwordConfirm"),o=$("#userName1"),n=$("#userSurame1"),i=$("#userEmail1"),l=$("#userClass1");if(""==t.val())e.preventDefault(),toastr.error("Zadejte název týmu.");else if(""==a.val()||a.val().length<6)e.preventDefault(),toastr.error("Zadejte heslo s nejméně 6 znaky.");else if(""==s.val())e.preventDefault(),toastr.error("Zadejte ověření hesla.");else if(0==r.val())e.preventDefault(),toastr.error("Vyberte školu pro tým.");else if(s.val()!=a.val())e.preventDefault(),toastr.error("Zadaná hesla se neshodují.");else if(""==o.val())e.preventDefault(),toastr.error("Zadejte jméno prvního člena týmu.");else if(""==n.val())e.preventDefault(),toastr.error("Zadejte příjmení prvního člena týmu.");else if(validateEmail(i.val())){if(""==l.val())e.preventDefault(),toastr.error("Zadejte třídu prvního člena týmu.");else if($("#userName2").length){var d=$("#userName2"),c=$("#userSurame2"),m=($("#school2"),$("#userEmail2")),u=$("#userClass2");""==d.val()?(e.preventDefault(),toastr.error("Zadejte jméno druhého člena týmu.")):""==c.val()?(e.preventDefault(),toastr.error("Zadejte příjmení druhého člena týmu.")):""==u.val()?(e.preventDefault(),toastr.error("Zadejte třídu druhého člena týmu.")):validateEmail(m.val())?m.val()==i.val()&&(e.preventDefault(),toastr.error("Každý člen týmu musí mít jedinečný email")):(e.preventDefault(),toastr.error("Zadejte e-mail druhého člena týmu ve správném tvaru."))}else if($("#userName3").length){var v=$("#userName3"),h=$("#userSurame3"),p=$("#userClass3"),f=$("#userEmail3");""==v.val()?(e.preventDefault(),toastr.error("Zadejte jméno třetího člena týmu.")):""==h.val()?(e.preventDefault(),toastr.error("Zadejte příjmení třetího člena týmu.")):""==p.val()?(e.preventDefault(),toastr.error("Zadejte třídu třetího člena týmu.")):validateEmail(f.val())?f.val()!=m.val()&&f.val()!=i.val()||(e.preventDefault(),toastr.error("Každý člen týmu musí mít jedinečný email")):(e.preventDefault(),toastr.error("Zadejte e-mail třetího člena týmu ve správném tvaru."))}}else e.preventDefault(),toastr.error("Zadejte e-mail prvního člena týmu ve správném tvaru.")}else if($("#teacher").is(":checked")){var g=$("#passwordConfirmTeacher").val(),b=$("#passwordConfirmTeacher").val(),k=$("#teacherName").val(),w=$("#teacherSurname").val(),y=$("#teacherSchool").val(),C=$("#teacherEmail").val();""==k?(e.preventDefault(),toastr.error("Zadejte Vaše jméno.")):""==w?(e.preventDefault(),toastr.error("Zadejte Vaše příjmení.")):validateEmail(C)?""==y?(e.preventDefault(),toastr.error("Vyberte Vaší školu.")):""==g||g.length<6?(e.preventDefault(),toastr.error("Zadejte heslo s nejméně 6 znaky.")):b!=g&&(e.preventDefault(),toastr.error("Zadaná hesla se neshodují.")):(e.preventDefault(),toastr.error("Zadejte Váš e-mail ve správném tvaru."))}}),$(".update-btn").on("click",function(e){if($(this).parent().hasClass("update-form")||$(this).parent().hasClass("create-modal")){if($(this).parent().hasClass("update-form"))var t=$("#member-name").val(),a=$("#member-surname").val(),r=$("#member-email").val(),s=$("#member-class").val();else if($(this).parent().hasClass("create-modal"))t=$("#name").val(),a=$("#surname").val(),r=$("#email").val(),s=$("#class").val();""==t?(e.preventDefault(),toastr.error("Jméno je povinný údaj.")):""==a?(e.preventDefault(),toastr.error("Příjmení je povinný údaj.")):validateEmail(r)?""==s&&(e.preventDefault(),toastr.error("Třída je povinný údaj.")):(e.preventDefault(),toastr.error("Zadejte e-mail ve správném tvaru."))}}),$("#teamName").keyup(function(){$("#teamLogin").val(url_slug($("#teamName").val()))}),$("#teacherEmail").keyup(function(){$(".teacher-login").text($("#teacherEmail").val())}),$(".formType").on("change",function(){$("#student").is(":checked")?($(".formTeacher").hide(),$(".formStudent").show()):($(".formTeacher").show(),$(".formStudent").hide())}),$(document).on("click",".open-detail",function(){row=$(this).parent().next("tr").find(".team-info-row .team-info"),row.is(":visible")?row.slideUp():($(this).parent().next("tr").find(".team-info-row").show(),row.slideDown())}),$(".close").on("click",function(){$(".update-form").children("input").val(""),$(".create-modal").children("input").val("")});var n=window.location.hash;if("#userlogged"==n&&$("#logout-modal").modal("show"),"#handedin"==n&&$("#finished-modal").modal("show"),"#added"==n&&toastr.success("Člen týmu byl úspěšně přidán."),"#enolFinished"==n&&toastr.error("Energetická olympiáda již zkončila."),"#teamFinished"==n&&toastr.error("Váš tým již olympiádu ukončil."),"#registered"==n&&toastr.success("Registrace proběhla úspěšně, na zadaný email bylo zasláno potvrzení."),$(".add-member").on("click",function(){$("#create-modal").modal("show");var e=$(".add-member").length;2==e?$("#create-modal .modal-body div").addClass("member-img-2"):1==e&&$("#create-modal .modal-body div").addClass("member-img-3")}),$(document).on("click",".findSchool",function(){var e=$(this).next(".zip").val(),t=$(this).parent("label").parent().parent().attr("class");(e=$.trim(e.replace(/\s/g,""))).length&&isFinite(String(e))?$.ajax({type:"POST",url:"/school/find",data:{zip:e},dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){if(0!==e.length){var a=$('<select class="wide school" name="'+("formStudent"==t?"school":"teacherSchool")+'" id="'+("formStudent"==t?"school":"teacherSchool")+'">');a.append($('<option value="0">Vyberte školu</option>')),$.each(e,function(e,t){a.append($("<option>").attr("value",e).text(t))}),"formStudent"==t?($("#school").remove(),$('label[for="school"]').append(a)):($("#teacherSchool").remove(),$('label[for="teacherSchool"]').append(a))}else toastr.error("Taková PSČ v databázi nemáme.")}}):toastr.error("Zadejte PSČ ve správném tvaru.")}),$(document).on("change",".school",function(){var e=$(this).val();$(this).parent().parent().attr("data-id");$("#teacher-info").children("p").remove(),$.ajax({type:"POST",url:"/user/teacher",data:{schoolId:e},dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){if(0!=e){var t="",a=1;e.name.length>1?($.each(e.name,function(){e.name.length==a?t+=this:(t+=this+", ",a++)}),$("#teacher-info").append($("<p>Příslušní pedagogové: <strong>"+t+"</strong>.</p>")).slideDown()):$("#teacher-info").append($("<p>Příslušný pedagog: <strong>"+e.name+"</strong>.</p>")).slideDown()}else $("#teacher-info").append("<p>Vaše škola zatím nemá registrován žádný učitelský účet. K dokončení registrace a k účasti v soutěži to není nezbytné, ale bylo by vhodné oslovit jakéhokoli pedagoga, který by vám zajistil prostory a PC během soutěže. Pokud vám škola neposkytne vhodné podmínky, soutěžit můžete z domova.").slideDown()}})}),$(".update-modal, .edit-btn").on("click",function(e){var t=$(this).attr("data-id");if($(this).parent("p").length)var a=$(this).parent("p").index();else a=$(this).parent("div").parent().index();a++,$(".modal-body").children("div").removeClass("member-img-1 member-img-2 member-img-3"),$.ajax({type:"POST",url:"/user/get",data:{id:t},dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){$(".modal-body").children("div").addClass("member-img-"+a),$("#member-name").val(e[0].name),$("#member-surname").val(e[0].surname),$("#member-email").val(e[0].email),$("#member-class").val(e[0].class),$("#member-id").val(e[0].id)}})}),$(document).on("change","#kraj_id, #okres_id, #city",function(){var a=$(this)[0].id,r=$("#"+a).val();$(".team-row").show(),$(".team-info-row").hide(),"kraj_id"==a&&""==r?($("label[for=city]").next("#city").remove(),t.insertAfter("label[for=city]"),$("label[for=okres_id]").next("#okres_id").remove(),e.insertAfter("label[for=okres_id]")):"kraj_id"==a&&""!=r?($("label[for=city]").next("#city").remove(),t.insertAfter("label[for=city]")):"okres_id"==a&&0==r&&($("label[for=city]").next("#city").remove(),t.insertAfter("label[for=city]")),$(".team-row").each(function(){""!=$("#kraj_id").val()&&$(this).attr("kraj-id")!=$("#kraj_id").val()&&$(this).hide(),0!=$("#okres_id").val()&&$(this).attr("okres-id")!=$("#okres_id").val()&&"kraj_id"!=a&&$(this).hide(),0!=$("#city").val()&&$(this).attr("city")!=$("#city").val()&&"okres_id"!=a&&$(this).hide()}),$.ajax({type:"POST",url:"/team/filter",data:{type:a,id:r},dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){e.select&&("kraj_id"==e.type?(okresSel=$('<select id="okres_id" name="okres"><option value="0">Vyberte okres</option>'),$.each(e.select,function(e,t){okresSel.append($('<option value="'+e+'">'+t+"</option>"))}),okresSel.append($("</select>")),$("label[for=okres_id]").next("#okres_id").remove(),okresSel.insertAfter("label[for=okres_id]")):"okres_id"==e.type&&(citySel=$('<select id="city" name="city"><option value="0">Vyberte město</option>'),$.each(e.select,function(e,t){citySel.append($('<option value="'+e+'">'+t+"</option>"))}),citySel.append($("</select>")),$("label[for=city]").next("#city").remove(),citySel.insertAfter("label[for=city]")))}})}),$(document).on("click",".nav-btn.next, .nav-btn.prev, .questions-wrap div",function(e){$(".next").removeAttr("style"),$(".prev").removeAttr("style"),$(".quiz-wrap").hasClass("results")&&$(this).trigger("click");var t=$(".question-wrap").attr("data-question"),a=$(".top .questions-wrap div").length;if(t==a&&1==t)return e.preventDefault(),!1;if($(".questions-wrap div").removeClass("active"),$(this).hasClass("next")){var r=t;r++,$(".questions-wrap div:nth-child("+r+")").addClass("active"),r==a&&$(".next").css({color:"transparent","pointer-events":"none"})}else if($(this).hasClass("prev")){r=t;1==--r&&$(".prev").css({color:"transparent","pointer-events":"none"}),$(".questions-wrap div:nth-child("+r+")").addClass("active")}else $(this).parent(".questions-wrap")&&(r=$(this).index()+1,$(".questions-wrap div:nth-child("+r+")").addClass("active"),r==a&&$(".next").css({color:"transparent","pointer-events":"none"}),1==r&&$(".prev").css({color:"transparent","pointer-events":"none"}));r!=t&&r<=a&&0!=r&&$.ajax({type:"GET",url:"/quiz/navigation",dataType:"json",data:{questionId:r},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){if(0==e.state?window.location.href="dash#userlogged":"enol_finished"==e.state?window.location.href="dash#enolFinished":"team_finished"==e.state&&(window.location.href="dash#teamFinished"),0!=e.state&&e.questions.length){$(".question-navigation-wrap").children().last().text();if($(".question-wrap").attr("data-question",e.questions[0].question_id),$(".intro-wrap").remove(),null!=e.questions[0].intro){$(".question-wrap").prepend($('<div class="intro-wrap"></div>'));var t="";1==e.questions[0].question_id?t=1:10==e.questions[0].question_id?t=2:20==e.questions[0].question_id&&(t=3),$(".intro-wrap").prepend($('<div class="intro-line img-'+t+'"></div>')),$(".intro").length?$(".intro").text(e.questions[0].intro):$(".intro-wrap").append($('<p class="intro img-'+t+'">'+e.questions[0].intro+"</p>"))}$(".question").html(e.questions[0].question),$("question-img").attr("style",""),""!=e.questions[0].image?($("#question-img").attr("src","/img/quiz/"+e.questions[0].image),$("#question-img").is(":hidden")&&$("#question-img").show()):($("#question-img").attr("src",""),$("#question-img").hide());-1!==$.inArray(e.questions[0].question_id,[20,21])?$("#question-img").css("width","60%"):$("#question-img").attr("style",""),1==e.questions[0].portrait?$("#question-img").addClass("portrait"):$("#question-img").removeClass("portrait");var a=$('<div class="answers" style="display:flex; flex-direction:column">');$.each(e.questions,function(t,s){var o=s.oid==e.answers[r]?'checked="checked"':"";a.append($('<div class="option-wrap"><input class="radio-answer" id="option_'+s.oid+'" name="answer" type="radio" value="'+s.oid+'" '+o+'><label for="option_'+s.oid+'">'+s.option+"</label></div>"))}),a.append($("</div>")),$(".answers").replaceWith(a),$(".radio-answer").mCheckable({className:"radioAnswer"})}}})}),!$(".quiz-wrap").hasClass("results")){var i=$(".top .questions-wrap div").length;0==$(".questions-wrap .active").index()&&$(".prev").css({color:"transparent","pointer-events":"none"}),$(".questions-wrap .active").index()+1==i&&$(".next").css({color:"transparent","pointer-events":"none"})}$("#save-answer").on("click",function(){var e=$(".question-wrap").attr("data-question"),t=$(".option-wrap").children("input:checked").val();t?$.ajax({type:"POST",url:"/quiz/save",dataType:"json",data:{questionId:e,optionId:t},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){1==t.state?($(".questions-wrap .active").addClass("done"),toastr.success("Odpověď byla úspěšně uložena.")):"enol_finished"==t.state?window.location.href="dash#enolFinished":"team_finished"==t.state?window.location.href="dash#teamFinished":window.location.href="dash#userlogged",$(".top .questions-wrap div:last-child").text()!==e&&$(".nav-btn.next")[0].click()}}):toastr.error("Vyberte odpověď.")});var l=$("#schoolZip"),d=$("#teacherSchoolZip");l.length&&(l.val().length>=5||d.val().length>=5?(l.prev(".findSchool").removeClass("disabled").addClass("active"),d.prev(".findSchool").removeClass("disabled").addClass("active")):(l.prev(".findSchool").removeClass("active").addClass("disabled"),d.prev(".findSchool").removeClass("active").addClass("disabled"))),$("#schoolZip, #teacherSchoolZip").on("keyup",function(){$(this).val().length>=5?$(this).prev(".findSchool").removeClass("disabled").addClass("active"):$(this).prev(".findSchool").removeClass("active").addClass("disabled")}),$(".formStudent").is(":visible")?($("#gdpr-team").prop("required",!0),$("#gdpr-teacher").removeAttr("required")):($("#gdpr-team").removeAttr("required"),$("#gdpr-teacher").prop("required",!0)),$("#student, #teacher").on("click",function(e){$(e.target)[0]===$("#student")[0]?($("#gdpr-team").prop("required",!0),$("#gdpr-teacher").removeAttr("required")):($("#gdpr-team").removeAttr("required"),$("#gdpr-teacher").prop("required",!0))}),$(".enter-quiz").on("click",function(){new Date>=startDate&&$(this).hasClass("disabled")&&($(this).css("pointer-events","none"),toastr.warning("Máme tu nával, zkuste obnovit prohlížeč a vstoupit ještě jednou"))})});